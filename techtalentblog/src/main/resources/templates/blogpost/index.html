<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Blog Site</title>
	<th:block th:replace="/fragments/bootstrap::head"></th:block>
</head>
<body>
	<div th:replace="/fragments/navbar"></div>
	<div class="container">
		<h1>Welcome to Our Blog Post Site!</h1>
		<h3>Check out our blogs!</h3>
		<div class="row">
			<div th:each="blog:${posts}">
				<div class="col-md-6">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title" th:text="${blog.title}"></h5>
							<div class="card-text">
								<p th:text="${blog.author}">
								<p th:text="${blog.blogEntry}">
							</div>
							<a th:href="@{/blogposts/{id} (id=${blog.id})}">
								<button class="btn btn-primary">Edit Post</button>
							</a>
							<!-- Button trigger modal -->
							<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete Post</button>
							
							<!-- Modal -->
							<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Confirm Post Deletion</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<p>This will permanently delete this blog post! Are you sure?</p>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close without deletion</button>
											<a th:href="@{/blogposts/delete/{id} (id=${blog.id})}">
												<button class="btn btn-danger">Delete Post</button>
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<a th:href="@{/blogposts/new}">
			<button class="btn btn-primary">Submit a new Blog Post</button>
		</a>
	</div>
	<th:block th:replace="fragments/bootstrap::end"></th:block>
</body>
</html>